<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ixvi PCs QR Effect - FIXED Glow</title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            background: black;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: visible;
        }

        #qr-container {
            position: relative;
            width: 200px;
            height: 200px;
            overflow: visible;
        }

        #glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 325px;
            height: 325px;
            border-radius: 50%;
            filter: blur(40px);
            opacity: 0.7;
            z-index: 1;
            background: red;
        }

        #qr {
            position: relative;
            width: 100%;
            height: 100%;
            z-index: 2;
        }

        .shake {
            animation: shakeQR 0.5s infinite;
        }

        @keyframes shakeQR {
            0% { transform: translate(0,0); }
            25% { transform: translate(3px,-3px); }
            50% { transform: translate(-3px,3px); }
            75% { transform: translate(3px,3px); }
            100% { transform: translate(0,0); }
        }

        #flash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: white;
            opacity: 0;
            z-index: 9999;
            pointer-events: none;
            transition: opacity 0.8s ease-out;
        }
    </style>
</head>
<body>
    <div id="qr-container">
        <div id="glow"></div>
        <img id="qr" src="qr.png" alt="QR Code" style="width: 200px; height: 200px;">
    </div>
    <div id="flash"></div>

    <script>
        const glow = document.getElementById('glow');
        const flash = document.getElementById('flash');
        const qr = document.getElementById('qr');

        const duration = 5000;
        let startTime = null;
        let shaking = false;

        function animate(timestamp) {
            if (!startTime) startTime = timestamp;
            const elapsed = timestamp - startTime;

            if (elapsed < duration) {
                let t = elapsed / duration;
                let flicker = (Math.random() * 0.15) - 0.075;
                let pulse = Math.sin(elapsed / 100) * 0.05;
                let baseOpacity = 0.2 + t * 0.6 + flicker + pulse;

                // Only the glow flickers!
                glow.style.opacity = Math.min(Math.max(baseOpacity, 0.2), 1);

                glow.style.background = `rgba(255,0,0,1)`;
                let minBlur = 25;
                let maxBlur = 40;
                let blur = minBlur + t * (maxBlur - minBlur);
                glow.style.filter = `blur(${blur}px)`;

                if (!shaking && t > 0.85) {
                    qr.classList.add('shake');
                    shaking = true;
                }

                requestAnimationFrame(animate);
            } else {
                qr.style.opacity = 0;
                glow.style.opacity = 0;
                flash.style.opacity = 1;
                setTimeout(() => {
                    flash.style.opacity = 0;
                    window.location.href = 'https://ixvi-pcs.github.io';
                }, 800);
            }
        }

        setTimeout(() => {
            requestAnimationFrame(animate);
        }, 1000);
    </script>
</body>
</html>
