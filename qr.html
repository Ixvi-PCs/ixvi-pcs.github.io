<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ixvi PCs QR Effect - FIXED Glow</title>
</head>
<style>
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: black;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: visible;
}

/* Container to hold QR + glow */
#qr-container {
    position: relative;
    width: 200px;
    height: 200px;
    overflow: visible; /* allow glow to expand beyond QR */
}

/* FIXED: Glowing layer behind QR - NOW SPREADS EVENLY IN ALL DIRECTIONS */
#glow {
    position: absolute;
    top: 50%;        /* CHANGED from -50% to -150% for even centering */
    left: 50%;       /* CHANGED from -100% to -150% for even centering */
    transform: translate(-50%, -50%);
    width: 400px;
    height: 400px;      /* CHANGED from 300% to 400% to match width */
    border-radius: 50%;
    filter: blur(40px);
    opacity: 0.7;
    z-index: 999;
    background: red;
}

/* QR code itself */
#qr {
    position: relative;
    width: 100%;
    height: 100%;
    z-index: 2;
}

/* Shake animation */
.shake {
    animation: shakeQR 0.5s infinite;
}

@keyframes shakeQR {
    0% { transform: translate(0,0); }
    25% { transform: translate(3px,-3px); }
    50% { transform: translate(-3px,3px); }
    75% { transform: translate(3px,3px); }
    100% { transform: translate(0,0); }
}

/* White flash overlay */
#flash {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: white;
    opacity: 0;
    z-index: 9999;
    pointer-events: none;
    transition: opacity 0.8s ease-out;
}
</style>
<body>
<div id="qr-container">
    <div id="glow"></div>
<img src="qr.png" alt="QR Code" style="width: 200px; height: 200px;">
</div>
<div id="flash"></div>

<script>
const glow = document.getElementById('glow');
const flash = document.getElementById('flash');
const ctx = qr.getContext('2d');



// Audio context
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
const oscillator = audioCtx.createOscillator();
const gainNode = audioCtx.createGain();
oscillator.connect(gainNode);
gainNode.connect(audioCtx.destination);
oscillator.type = 'sine';
oscillator.frequency.setValueAtTime(220, audioCtx.currentTime);
gainNode.gain.setValueAtTime(0.001, audioCtx.currentTime);
oscillator.start();

// Animation timing
const duration = 5000;
let startTime = null;
let shaking = false;

// Animate living glow
function animate(timestamp) {
    if (!startTime) startTime = timestamp;
    const elapsed = timestamp - startTime;

    if (elapsed < duration) {
        let t = elapsed / duration;

        // Flicker and pulse for alive flames
        let flicker = (Math.random() * 0.15) - 0.075; // opacity flicker
        let pulse = Math.sin(elapsed / 100) * 0.05;      // sinusoidal pulse

        // Gradually increase opacity + flicker + pulse
        let baseOpacity = 0.2 + t * 0.6 + flicker + pulse;
        glow.style.opacity = Math.min(Math.max(baseOpacity, 0.2), 1);

        // Pure red glow (no purple)
        glow.style.background = `rgba(255,0,0,1)`;

        // Gradually increase blur for spreading effect
        let minBlur = 25;
        let maxBlur = 40;
        let blur = minBlur + t * (maxBlur - minBlur);
        glow.style.filter = `blur(${blur}px)`;

        // Audio ramp
        gainNode.gain.setValueAtTime(0.001 + t*0.03, audioCtx.currentTime);
        oscillator.frequency.setValueAtTime(220 + t*30, audioCtx.currentTime);

        // Start shaking near climax
        if (!shaking && t > 0.85) {
            qr.classList.add('shake');
            shaking = true;
        }

        requestAnimationFrame(animate);
    } else {
        // Glow complete, trigger white flash
        qr.style.opacity = 0;
        glow.style.opacity = 0;
        flash.style.opacity = 1;

        setTimeout(() => {
            flash.style.opacity = 0; // fade out smoothly
            oscillator.stop();
            window.location.href = 'https://ixvi-pcs.github.io';
        }, 800);
    }
}

// Start after 1s delay
setTimeout(() => {
    requestAnimationFrame(animate);
}, 1000);
</script>
</body>
</html>
